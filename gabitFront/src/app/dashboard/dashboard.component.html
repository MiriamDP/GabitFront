<app-nav></app-nav>

<main class="main-content">
  <div class="dashboard-container">
    
    <header class="dashboard-header">
      <div class="greeting-section">
        <h1 class="greeting">{{ getGreeting() }}, {{ userName }}</h1>
        <p class="subtitle">Aquí está tu progreso en Gabit</p>
      </div>
      <button class="btn-create" (click)="createNewHabit()">
        <lucide-icon name="plus" size="18" style="margin-right: 8px;"></lucide-icon>
        Crear hábito
      </button>
    </header>

    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon habits"><lucide-icon name="target"></lucide-icon></div>
        <div>
          <p class="stat-value">{{ stats.activeHabits }}</p>
          <p class="stat-label">Hábitos activos</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon missions"><lucide-icon name="circle-check-big"></lucide-icon></div>
        <div>
          <p class="stat-value">{{ stats.completedMissions }}</p>
          <p class="stat-label">Misiones totales</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon levels"><lucide-icon name="trophy"></lucide-icon></div>
        <div>
          <p class="stat-value">{{ getTotalLevels() }}</p>
          <p class="stat-label">Niveles totales</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon streak"><lucide-icon name="flame"></lucide-icon></div>
        <div>
          <p class="stat-value">{{ stats.longestStreak }}</p>
          <p class="stat-label">Racha más larga</p>
        </div>
      </div>
    </section>

    <div *ngIf="isLoading" class="loading-state">
      <p>Cargando...</p>
    </div>

    <div *ngIf="error && !isLoading" class="error-state">
      <lucide-icon name="triangle-alert" size="32" color="#DC2626"></lucide-icon>
      <p class="error-message">{{ error }}</p>
      <button class="btn-retry" (click)="loadUserHabits()">Reintentar</button>
    </div>

    <section *ngIf="!isLoading && !error">
      <div *ngIf="userHabits.length === 0" class="empty-state">
        <h3>No tienes hábitos aún</h3>
        <button class="btn-create" (click)="createNewHabit()">Crear mi primer hábito</button>
      </div>
      
      </section>

  </div>
</main>